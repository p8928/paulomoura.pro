---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../nav/Navigation.astro';
import Footer from '../footer/Footer.astro';
import ReadingProgressBar from './ReadingProgressBar.astro';
import BackToTopButton from './BackToTopButton.astro';
import Button from '../ui/Button.astro';

// Props para receber os dados do post
const { post, relatedPosts } = Astro.props;
const { title, description, publishDate, tags, image, author } = post.data;
const slug = post.slug;

// Format the date
const formattedDate = publishDate.toLocaleDateString('pt-BR', {
  day: '2-digit',
  month: '2-digit',
  year: 'numeric'
});

// Generate placeholder image if not provided
const featuredImage = image && image.url ? image.url : `/img/thumbs/branding_post.webp`;
const imageAlt = image && image.alt ? image.alt : `Imagem de destaque para o artigo: ${title}`;
---

<Layout title={`${title} - Blog - Moura | Marketing e Comunicação Digital}`}>

  <Navigation slot="nav" />

  <div slot="rest-content" class="blog-post-page">
    
    <div class="post-featured-image">
      <img 
        src={featuredImage} 
        alt={imageAlt}
        loading="eager"
        width="1200"
        height="600"
      />
    </div>

    <ReadingProgressBar />
    
          <div class="main-content-area-full">
          <article class="blog-post-content">      <header class="post-header">
        <h1 class="post-title">{title}</h1>
        <div class="post-meta-top hygge-meta">
          <div class="post-date-author">
            <time class="post-date" datetime={publishDate.toISOString()}>
              {publishDate.toLocaleDateString('pt-BR', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric' 
              })}
            </time>
            <span class="post-author-divider" aria-hidden="true">•</span>
            <a href="/author/paulo-moura" class="post-author">Paulo Moura | Fundador e Estrategista em SEO e Marketing Digital</a>
          </div>
          <div class="post-stats">
            <span class="reading-time">
              {/* TODO: Implement reading time calculation */}
              <span>10 min de leitura</span>
            </span>
          </div>
        </div>
        <div class="post-meta-bottom">
          <div class="post-tags">
            {tags.map(tag => (
              <a href={`/tags/${tag.toLowerCase()}/`} class="post-tag">
                {tag}
              </a>
            ))}
          </div>
        </div>
      </header>

      <div class="post-body">
        <slot name="content" />
      </div>

      {/* Próximo conteúdo - somente se houver artigos relacionados */}
      {relatedPosts && relatedPosts.length > 0 && (
        <section class="next-content">
          <div class="next-content-wrapper">
            <span class="next-content-label">Próximo conteúdo:</span>
            <a href={`/blog/${relatedPosts[0].slug}/`} class="next-content-link">
              {relatedPosts[0].data.title}
              <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </a>
          </div>
        </section>
      )}

      <footer class="post-footer">

        <section class="newsletter-cta">
          <div class="newsletter-content">
            <p>Receba conteúdos exclusivos, pensados para quem deseja modernizar os negócios. Venha fazer parte desse grupo seleto!</p>
            <Button variant="primary" href="https://substack.com/@brandledseo" target="_blank" class="btn-primary">Inscreva-se</Button>
          </div>
        </section>
      </footer>
    </article>
  </div>

    {relatedPosts && relatedPosts.length > 0 && (
      <section class="related-posts hygge-related-posts">
        <div class="related-posts-header">
          <h2 class="related-posts-title">Recomendamos também:</h2>
          <div class="related-posts-divider"></div>
        </div>
        <div class="related-posts-grid">
          {relatedPosts.map(post => (
            <a href={`/blog/${post.slug}/`} class="related-post-card hygge-card">
              <div class="related-post-thumb">
                <img 
                  src={post.data.image && post.data.image.url 
                    ? post.data.image.url 
                    : `https://placehold.co/300x200/ccc/969696?text=${encodeURIComponent(post.data.tags[0])}`} 
                  alt={post.data.image && post.data.image.alt || `Imagem do artigo: ${post.data.title}`}
                  loading="lazy"
                />
              </div>
              <div class="related-post-content">
                <h3 class="related-post-title">{post.data.title}</h3>
                <time class="related-post-date" datetime={post.data.publishDate.toISOString()}>
                  {post.data.publishDate.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' })}
                </time>
                <span class="related-post-tag">{post.data.tags[0]}</span>
              </div>
            </a>
          ))}
        </div>
        <div class="view-all-posts">
          <Button variant="tertiary" href="/blog" class="btn-view-all">
            Ver todos os posts
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 0.5rem;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </Button>
        </div>
      </section>
    )}

    <BackToTopButton />
  </div>

  <Footer slot="rest-content" />

</Layout>

<style>
.blog-post-page {
  display: grid;
  grid-template-columns: 1fr;
  gap: 3rem;
  padding: 0 5vw; /* Ajusta padding para ser proporcional à tela */
  max-width: 100%; /* Remove limitação de largura máxima */
  margin: 0 auto;
  width: 100%;
  padding-top: 2rem; /* Adiciona espaçamento no topo para evitar sobreposição com navbar */
}

.main-content-area-full {
  width: 100%;
  padding: 0 5vw; /* Usando viewport width para padding mais responsivo */
  max-width: 100%;
  margin: 0 auto;
}

.blog-post-content {
  width: 100%;
  max-width: 1100px; /* Largura aumentada para leitura de texto */
  margin: 0 auto; /* Centraliza o conteúdo */
}

/* Garantir que o conteúdo principal tenha largura total em mobile */
@media (max-width: 768px) {
  .main-content-area-full {
    padding: 0 1.5rem;
  }

  .blog-post-content {
    max-width: 100%;
    padding: 0 1rem; /* Adiciona um pequeno padding nas laterais em mobile */
  }
}

/* Para telas maiores */
@media (min-width: 1400px) {
  .blog-post-content {
    max-width: 1200px; /* Aumenta ainda mais em telas grandes */
  }
}

/* Ajustar layout para dispositivos móveis */
@media (max-width: 992px) {
  .blog-post-page {
    padding: 0 1.5rem;
  }
  
  .related-posts {
    margin-top: 2.5rem;
    padding-top: 2rem;
  }
  
  article.blog-post-content {
    max-width: 100%;
    margin: 0 auto;
  }
  


  .share-section {
    display: none;
  }
}

.post-title {
  font-size: clamp(2rem, 4vw, 2.8rem);
  line-height: 1.2;
  margin: 0 0 1.5rem 0;
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
}

.post-meta-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.post-meta-top {
  display: flex;
  gap: 1.5rem;
  margin: 1.5rem 0;
  font-size: 0.9rem;
  color: var(--color-text-tertiary);
}

.post-date, .post-author {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.post-date::before {
  content: '';
  display: inline-block;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background-color: var(--color-accent);
}

.post-tags {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.post-tag {
  display: inline-block;
  background: rgba(192, 178, 131, 0.1);
  color: var(--color-accent);
  padding: 0.3rem 0.8rem;
  border-radius: 12px;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.3s ease;
}

.post-tag:hover {
  background: var(--color-accent);
  color: white;
}

.reading-time {
  font-size: 0.9rem;
  color: var(--color-text-tertiary);
  font-weight: 500;
}

.post-featured-image {
  width: 100vw;
  position: relative;
  left: 50%;
  right: 50%;
  margin: 0 0 3rem 0;
  margin-left: -50vw;
  margin-right: -50vw;
  padding: 0;
  overflow: hidden;
  border: none;
  box-shadow: none;
  border-radius: 0;
}

.post-featured-image img {
  width: 100%;
  height: 70vh;
  display: block;
  object-fit: cover;
  border: none;
  box-shadow: none;
}

.image-caption {
  padding: 0.75rem 1rem;
  font-size: 0.85rem;
  color: var(--color-text-tertiary);
  text-align: center;
  background-color: var(--color-background);
  font-style: italic;
}

.post-body {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--color-text-secondary);
  margin-bottom: 3rem;
  width: 100%;
  max-width: 1100px; /* Mantém alinhamento com o conteúdo principal */
  margin-left: auto;
  margin-right: auto;
  padding: 0 1rem; /* Adiciona algum espaçamento lateral */
}

/* Estilo otimizado para leitura tipo Kindle */
@media (max-width: 768px) {
  .post-body {
    font-size: 1.15rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
    margin-bottom: 2rem;
    max-width: 100%;
    padding: 0 1rem; /* Mantém o espaçamento em telas menores */
    hyphens: none; /* Remove hifenização */
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Melhora a legibilidade dos parágrafos */
  .post-body p {
    text-align: justify;
    margin-bottom: 1.2rem;
  }
  
  /* Ajusta bloco de citações para leitura móvel */
  .post-body blockquote {
    border-left: 3px solid var(--color-accent);
    padding: 1rem 1.2rem;
    margin: 1.8rem 0;
    background-color: transparent;
    font-style: italic;
    font-size: 1.05rem;
  }
}

/* Melhorias de espaçamento e tipografia para desktop - similar à experiência Kindle */
.post-body p {
  margin-bottom: 1.8rem !important; /* Aumentado para melhor respiração entre parágrafos */
}

/* Estilos mais específicos para sobrescrever o CSS global */
.post-body h2 {
  font-size: 1.8rem !important;
  margin: 6rem 0 2rem !important; /* Aumentado significativamente o espaçamento superior */
  color: var(--color-text-primary) !important;
}

.post-body h3 {
  font-size: 1.5rem !important;
  margin: 5rem 0 1.5rem !important; /* Aumentado significativamente o espaçamento superior */
  color: var(--color-text-primary) !important;
}

.post-body blockquote {
  border-left: 4px solid var(--color-accent);
  padding: 1rem 1.5rem;
  margin: 2.5rem 0; /* Ajustado para consistência */
  background-color: rgba(192, 178, 131, 0.05);
  font-style: italic;
}

/* Estilo de leitura tipo Kindle para desktop */
@media (min-width: 769px) {
  .post-body {
    font-size: 1.15rem; /* Levemente maior para melhor legibilidade */
    line-height: 1.75; /* Ajuste para espaçamento vertical */
    max-width: 1100px; /* Largura aumentada para melhor aproveitamento de espaço */
    margin-left: auto; /* Centraliza o conteúdo */
    margin-right: auto;
    hyphens: none; /* Remove hifenização */
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .post-body p {
    text-align: justify;
    margin-bottom: 1.8rem;
  }
  
  .post-body blockquote {
    border-left: 3px solid var(--color-accent);
    padding: 1.1rem 1.6rem;
    margin: 2.5rem 0;
    background-color: transparent;
    font-style: italic;
    font-size: 1.1rem;
  }
}

.post-body ul, .post-body ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.post-body li {
  margin-bottom: 0.5rem;
}

.post-footer {
  padding-top: 2.5rem;
  margin-top: 3rem;
}

.share-section {
  margin-bottom: 2.5rem;
}

.share-section h3 {
  margin-bottom: 1rem;
  color: var(--color-text-primary);
  font-size: 1.2rem;
}

.share-buttons {
  display: flex;
  gap: 1rem;
}

.share-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
  transition: all 0.3s ease;
  text-decoration: none;
}

.share-btn:hover {
  background-color: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
  transform: translateY(-3px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.newsletter-cta {
  padding: 2.5rem;
  margin: 3rem auto; /* Centraliza a seção */
  border-top: 1px solid var(--color-border);
  text-align: center;
  width: 100%;
  max-width: 660px; /* 60% de 1100px (redução de 40%) */
}

.newsletter-content p {
  margin-bottom: 1.5rem;
  color: var(--color-text-secondary);
  font-size: 1rem;
  line-height: 1.6;
  text-align: center;
}

.newsletter-content .btn-subscribe {
  padding: 0.8rem 2rem;
  font-size: 0.9rem;
}

.related-posts {
  margin-top: 4rem;
  padding-top: 2.5rem;
}

.related-posts-title {
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
  color: var(--color-primary);
  text-align: left;
  margin-bottom: 1.2rem;
}

.related-posts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

/* Estilo Hygge para artigos relacionados */
.hygge-related-posts {
  margin-top: 5rem;
  padding-top: 2rem;
  position: relative;
}

.related-posts-header {
  display: flex;
  align-items: center;
  margin-bottom: 2rem;
}

.related-posts-header h2 {
  font-size: 1.4rem;
  color: var(--color-accent);
  margin: 0;
  padding-right: 1rem;
  font-weight: var(--font-weight-medium);
}

.related-posts-divider {
  flex: 1;
  height: 1px;
  background: linear-gradient(to right, var(--color-accent), transparent);
  opacity: 0.7;
}

.hygge-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: all var(--transition-normal);
  background: linear-gradient(135deg, var(--color-background) 0%, rgba(192, 178, 131, 0.03) 100%);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
  position: relative;
  z-index: 1;
}

.hygge-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, transparent, rgba(192, 178, 131, 0.03));
  z-index: -1;
  opacity: 0;
  transition: opacity var(--transition-slow);
}

.hygge-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  border-color: rgba(192, 178, 131, 0.3);
}

.hygge-card:hover::before {
  opacity: 1;
}

.hygge-card .related-post-content {
  padding: 1.5rem;
}

.hygge-card .related-post-title {
  font-size: 1.1rem;
  margin: 0 0 0.75rem 0;
  color: var(--color-text-primary);
  line-height: 1.4;
  transition: color var(--transition-normal);
}

.hygge-card:hover .related-post-title {
  color: var(--color-accent);
}

.hygge-card .related-post-date {
  font-size: 0.85rem;
  color: var(--color-text-tertiary);
  margin-bottom: 0.75rem;
  display: block;
}

.hygge-card .related-post-tag {
  background: rgba(192, 178, 131, 0.1);
  color: var(--color-accent);
  padding: 0.25rem 0.7rem;
  border-radius: 15px;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 500;
  display: inline-block;
  transition: all var(--transition-normal);
}

.hygge-card:hover .related-post-tag {
  background: var(--color-accent);
  color: white;
}

.view-all-posts {
  text-align: center;
  margin-top: 2.5rem;
  margin-bottom: 8rem; /* Adicionando uma margem inferior considerável para criar espaço entre o botão e o footer */
}

.related-post-card {
  background: var(--color-background);
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  overflow: hidden;
  text-decoration: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  border: 1px solid var(--color-border);
  height: 100%;
}

.related-post-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.12);
  border-color: var(--color-accent);
}

.related-post-thumb {
  height: 180px;
  background: var(--color-background);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  border-bottom: 1px solid var(--color-border);
}

.related-post-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.related-post-content {
  padding: 1.5rem;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}

.related-post-title {
  font-size: 1.1rem;
  margin: 0 0 0.75rem 0;
  color: var(--color-text-primary);
  line-height: 1.4;
  flex-grow: 1;
}

.related-post-date {
  font-size: 0.8rem;
  color: var(--color-text-tertiary);
  margin-bottom: 0.5rem;
  display: block;
}

.related-post-tag {
  background: rgba(192, 178, 131, 0.1);
  color: var(--color-accent);
  padding: 0.2rem 0.6rem;
  border-radius: 12px;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  font-weight: 300;
  display: inline-block;
}

/* Updated Post Meta Top */
.post-meta-top {
  display: flex;
  align-items: center;
  gap: 1.2rem;
  margin: 1.5rem 0;
  font-size: 0.9rem;
  color: var(--color-text-tertiary);
}

.post-date {
  font-style: italic;
  color: var(--color-text-tertiary);
}

/* Estilo Hygge para o cabeçalho do post */
.hygge-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.8rem 0;
  border-bottom: 1px solid var(--color-border);
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 0.8rem;
}

.post-date-author {
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.post-author-divider {
  color: var(--color-text-tertiary);
  opacity: 0.7;
}

.post-author {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
  text-decoration: none;
  transition: color var(--transition-normal);
  position: relative;
}

.post-author:hover {
  color: var(--color-accent);
}

.post-author::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 1px;
  background-color: var(--color-accent);
  transition: width var(--transition-normal);
}

.post-author:hover::after {
  width: 100%;
}

.post-stats {
  display: flex;
  align-items: center;
  gap: 1rem;
}

@media (max-width: 768px) {
  .hygge-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .post-stats {
    align-self: flex-end;
  }
}

.social-share-buttons {
  display: flex;
  gap: 0.8rem;
  align-items: center;
  padding-left: 0.5rem;
  border-left: 1px solid var(--color-border);
}

.social-share-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  transition: all var(--transition-normal);
  text-decoration: none;
  cursor: pointer;
  flex-shrink: 0;
  opacity: 0.7;
  border-radius: 4px;
}

.social-share-btn img {
  transition: all var(--transition-normal);
  filter: grayscale(100%) brightness(0.8);
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.social-share-btn:hover {
  opacity: 1;
  transform: translateY(-2px) scale(1.1);
}

.social-share-btn:hover img {
  filter: brightness(0) saturate(100%) invert(79%) sepia(21%) saturate(448%) hue-rotate(341deg) brightness(101%) contrast(94%); /* Color based on --color-accent */
}

@media (max-width: 768px) {
  .post-meta-top {
    flex-wrap: wrap;
  }
  
  .social-share-buttons {
    gap: 0.5rem;
    margin-top: 0.5rem;
    padding-left: 0;
    border-left: none;
    margin-left: 1rem;
  }
  
  .social-share-btn {
    width: 22px;
    height: 22px;
  }
}

/* Article Share Section */
.share-article-section {
  text-align: center;
  padding: 2rem 0;
  margin: 2rem 0;
  border-top: 1px solid var(--color-border);
  border-bottom: 1px solid var(--color-border);
}

.share-prompt {
  margin-bottom: 1.2rem;
  color: var(--color-text-secondary);
  font-size: 1rem;
  font-weight: var(--font-weight-medium);
}

.social-share-buttons-bottom {
  display: flex;
  justify-content: center;
  gap: 1.2rem;
  align-items: center;
}

.social-share-btn-bottom {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: var(--color-background);
  transition: all var(--transition-normal);
  text-decoration: none;
  border: 1px solid var(--color-border);
  cursor: pointer;
  flex-shrink: 0;
}

.social-share-btn-bottom:hover {
  background-color: var(--color-accent);
  border-color: var(--color-accent);
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(192, 178, 131, 0.3);
}

.social-share-btn-bottom svg {
  transition: all var(--transition-normal);
  color: var(--color-text-tertiary);
}

.social-share-btn-bottom:hover svg {
  color: white;
}

.social-share-btn-bottom:hover {
  background-color: var(--color-accent);
  border-color: var(--color-accent);
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(192, 178, 131, 0.3);
}

.social-share-btn-bottom:hover svg {
  filter: brightness(0) saturate(100%) invert(79%) sepia(21%) saturate(448%) hue-rotate(341deg) brightness(101%) contrast(94%); /* Uses --color-accent */
}

/* Ajustes adicionais para dispositivos pequenos com foco em leitura */
@media (max-width: 576px) {
  .post-body {
    font-size: 1.2rem; /* Tamanho de fonte otimizado para leitura em dispositivos pequenos */
    line-height: 1.75;
    padding: 0 0.5rem;
  }

  .post-title {
    font-size: 1.7rem;
    padding: 0 0.5rem;
  }

  .post-featured-image img {
    height: 40vh;
  }

  /* Remover completamente elementos não essenciais em dispositivos muito pequenos */
  .post-meta-bottom {
    padding: 0 0.5rem;
  }

  .newsletter-cta {
    padding: 1.5rem;
    margin: 2.5rem 0.5rem 0;
  }

  .related-posts {
    display: none; /* Ocultar artigos relacionados em dispositivos muito pequenos */
  }

  .social-share-buttons-bottom {
    display: none; /* Ocultar compartilhamento em dispositivos muito pequenos */
  }
}

@media (max-width: 768px) {
  .share-article-section {
    padding: 1.5rem 0;
    margin: 1.5rem 0;
  }
  
  .share-prompt {
    font-size: 0.95rem;
  }
  
  .social-share-buttons-bottom {
    gap: 0.8rem;
  }
  
  .social-share-btn-bottom {
    width: 46px;
    height: 46px;
  }
  
  /* Estilos para o componente de newsletter em mobile */
  .newsletter-cta {
    margin: 2.5rem auto; /* Centraliza a seção */
    padding: 1.8rem;
    max-width: 90%; /* Usa porcentagem em mobile para manter a proporção */
  }
  
  .newsletter-content p {
    font-size: 0.9rem;
    margin-bottom: 0.8rem;
  }
  
  .btn-subscribe {
    padding: 0.5rem 1.2rem;
    font-size: 0.9rem;
  }
}

/* Estilo para o componente de próximo conteúdo */
.next-content {
  padding: 2rem 0;
  margin: 2rem 0;
  border-top: 1px solid var(--color-border);
  text-align: center;
}

.next-content-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.next-content-label {
  font-size: 0.9rem;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 0.3rem;
}

.next-content-link {
  font-size: 1.2rem;
  font-weight: var(--font-weight-medium);
  color: var(--color-accent);
  text-decoration: none;
  transition: color 0.3s ease;
  text-align: center;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.next-content-link:hover {
  color: var(--color-text-primary);
}

.arrow-icon {
  transition: transform 0.3s ease;
}

.next-content-link:hover .arrow-icon {
  transform: translateX(3px);
}

/* Estilo para mobile */
@media (max-width: 768px) {
  .next-content {
    padding: 1.5rem 0;
    margin: 1.5rem 0;
  }
  
  .next-content-link {
    font-size: 1.1rem;
  }
}

/* Estilo para o botão de compartilhamento */
.share-trigger-container {
  text-align: center;
  margin: 2rem 0;
}

.share-trigger-btn svg {
  width: 18px;
  height: 18px;
}

/* Estilos para o overlay de compartilhamento */
.share-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.share-overlay-content {
  width: 90%;
  max-width: 400px;
  background-color: var(--color-background);
  border-radius: var(--radius-md);
  padding: 1.5rem;
  position: relative;
  animation: slideIn 0.3s ease;
}

.share-overlay-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--color-border);
}

.share-overlay-header h3 {
  margin: 0;
  color: var(--color-text-primary);
  font-size: 1.2rem;
}

.close-share-overlay {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--color-text-tertiary);
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background-color 0.3s ease;
}

.close-share-overlay:hover {
  background-color: var(--color-border);
}

.social-share-options {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.share-option-btn {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.8rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  text-decoration: none;
  transition: all 0.3s ease;
}

.share-option-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-text-primary);
  background-color: rgba(192, 178, 131, 0.05);
}

.share-option-btn img {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  display: block;
}

/* Estilo adicional para garantir visibilidade das imagens */
.share-overlay-content img {
  max-width: 24px;
  max-height: 24px;
}

.share-option-btn span {
  font-size: 1rem;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Estilo para dispositivos muito pequenos */
@media (max-width: 576px) {
  .next-content {
    margin: 1.5rem 0.5rem;
  }
  
  .next-content-label {
    font-size: 0.8rem;
  }
  
  .next-content-link {
    font-size: 1rem;
  }
  
  .share-overlay-content {
    width: 95%;
    padding: 1.2rem;
  }
  
  .share-trigger-btn {
    padding: 0.6rem 1.2rem;
    font-size: 0.95rem;
  }
  
  .share-option-btn img {
    width: 20px;
    height: 20px;
  }
}

/* Estilos específicos para garantir visibilidade dos ícones */
.share-option-btn img {
  min-width: 24px;
  min-height: 24px;
  object-fit: contain;
}

/* Exibir o botão de compartilhamento somente no mobile */
@media (max-width: 768px) {
  .share-trigger-container {
    display: block;
  }
  
  /* Esconder a seção de artigos relacionados no mobile */
  .related-posts {
    display: none;
  }
}

/* Esconder o botão de compartilhamento no desktop */
@media (min-width: 769px) {
  .share-trigger-container {
    display: none;
  }
  
  /* Exibir a seção de artigos relacionados somente no desktop */
  .related-posts {
    display: block;
  }
}

/* Esconder os elementos de compartilhamento originais no mobile */
@media (max-width: 768px) {
  
  .social-share-buttons {
    display: none;
  }
  
  .share-article-section {
    display: none;
  }
}

/* Ajustes para o tamanho das imagens dos artigos relacionados em desktop */
@media (min-width: 769px) {
  .related-post-thumb {
    height: 180px;
  }
}

</style>
<script>
  function setupTocObserver() {
    const tocLinks = document.querySelectorAll('.toc-container a');
    const headings = Array.from(tocLinks).map(link => {
      const id = link.getAttribute('href').substring(1);
      return document.getElementById(id);
    }).filter(Boolean);

    if (headings.length === 0) return;

    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        const id = entry.target.getAttribute('id');
        const correspondingLink = document.querySelector(`.toc-container a[href="#${id}"]`);
        if (correspondingLink) {
          if (entry.isIntersecting) {
            correspondingLink.classList.add('active');
          } else {
            correspondingLink.classList.remove('active');
          }
        }
      });
    }, {
      rootMargin: '-50% 0px -50% 0px',
      threshold: 0
    });

    headings.forEach(heading => observer.observe(heading));
  }

  if (document.readyState === 'loading') {
    // Loading hasn't finished yet
    document.addEventListener('DOMContentLoaded', setupTocObserver);
  } else {
    // DOM is already loaded, run setup immediately
    setupTocObserver();
  }
</script>
