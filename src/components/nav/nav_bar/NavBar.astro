---
import './css/nav_bar.css';
import Menu from '../overlay_menu/Menu.astro';
---

  <header class="hero__header">
    <div class="hero__logo">
      <a href="/">
        <img src="/img/logo/main_logo_black.svg" alt="Logo Moura">
      </a>
    </div>
    

    
    <!-- Hamburger Menu Button (only visible on mobile) -->
    <button class="hero__menu-btn" id="mobileMenuBtn" aria-label="Abrir menu">
      <div class="hero__menu-lines">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </button>
    
    <nav class="hero__nav">
      <a href="/sobre" class="hero__nav-link about-link desktop-only">Sobre</a>

      <a href="/pricing" class="hero__nav-link about-link desktop-only">Preço</a>
      
      <a href="/servicos" class="hero__nav-link services-link blog-link">Serviços</a>
      
      <a href="/blog" class="hero__nav-link blog-link">Blog</a>
      
      <a href="/contato" 
         class="hero__nav-link contact desktop-only">
        Contato
      </a>
      
      <!-- Language selector moved to the end of the navigation -->
      <div class="hero__language-selector">
        <button class="hero__language-btn" id="languageBtn" aria-label="Selecionar idioma">
          <span id="currentLanguage">pt-BR</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 4px;">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
        
        <div class="hero__language-dropdown" id="languageDropdown">
          <a href="/" class="hero__language-option" data-lang="pt" data-text="pt-BR">
            <span>Português</span>
          </a>
          <a href="/en" class="hero__language-option" data-lang="en" data-text="en-UK">
            <span>English</span>
          </a>
          <a href="/es" class="hero__language-option" data-lang="es" data-text="es-ES">
            <span>Español</span>
          </a>
        </div>
      </div>
    </nav>
    
<Menu />
  </header>

  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      const languageBtn = document.getElementById('languageBtn');
      const languageDropdown = document.getElementById('languageDropdown');
      const currentLanguage = document.getElementById('currentLanguage');
      const languageOptions = document.querySelectorAll('.hero__language-option');
      
      // Initialize with Portuguese as default
      const defaultLanguage = 'pt';
      
      // Set initial language from localStorage or default
      const savedLanguage = localStorage.getItem('selectedLanguage') || defaultLanguage;
      
      // Set active language on page load
      setActiveLanguage(savedLanguage);
      
      // Add click event to language button to toggle dropdown
      languageBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
      });
      
      // Close language dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!languageBtn.contains(e.target) && !languageDropdown.contains(e.target)) {
          closeDropdown();
        }
      });
      
      // Close dropdown on ESC key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeDropdown();
        }
      });
      
      // Handle language selection
      languageOptions.forEach(option => {
        option.addEventListener('click', function(e) {
          e.preventDefault();
          const lang = this.getAttribute('data-lang');
          setActiveLanguage(lang);
          closeDropdown();
        });
      });
      
      // Set active language
      function setActiveLanguage(lang) {
        const selectedOption = document.querySelector(`.hero__language-option[data-lang="${lang}"]`);
        if (selectedOption) {
          const text = selectedOption.getAttribute('data-text');
          
          // Update current language display
          currentLanguage.textContent = text;
          
          // Update active state
          languageOptions.forEach(option => {
            option.classList.toggle('active', option.getAttribute('data-lang') === lang);
          });
          
          // Save to localStorage
          localStorage.setItem('selectedLanguage', lang);
          localStorage.setItem('userLanguage', lang);
        }
      }
      
      function closeDropdown() {
        languageDropdown.classList.remove('show');
      }
    });
    

    
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const overlayMenu = document.getElementById('overlayMenu');
    const closeMenuBtn = document.getElementById('closeMenuBtn');

    mobileMenuBtn.addEventListener('click', () => {
      overlayMenu.classList.add('open');
      document.body.classList.add('overlay-open');
    });

    closeMenuBtn.addEventListener('click', () => {
      overlayMenu.classList.remove('open');
      document.body.classList.remove('overlay-open');
    });
  </script>
