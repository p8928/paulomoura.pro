---
// Data moved from ServicesDetails.astro
const services = [
  {
    id: 'branding-digital',
    title: 'Branding Digital',
    description: 'Construímos a identidade digital da sua marca do zero ou refinamos a existente. Definimos mensagem central, tom de voz, posicionamento visual e presença online coesa que faz sua audiência reconhecer você instantaneamente — e querer se aproximar.',
    included: [
      {
        title: 'Análise de Identidade',
        items: [
          'Auditoria completa da presença atual (se existente)',
          'Mapeamento de valores, diferenciais e posicionamento',
          'Identificação de gaps entre identidade real e percebida'
        ]
      },
      {
        title: 'Estratégia de Marca',
        items: [
          'Definição de mensagem central (core message)',
          'Tom de voz e personalidade da marca',
          'Arquétipos e território emocional',
          'Posicionamento competitivo'
        ]
      },
      {
        title: 'Expressão Visual',
        items: [
          'Sistema de identidade visual digital',
          'Paleta de cores, tipografia, elementos gráficos',
          'Guidelines de aplicação em todos os canais',
          'Assets prontos para uso (banners, templates, etc.)'
        ]
      },
      {
        title: 'Presença Online Coesa',
        items: [
          'Alinhamento entre site, redes sociais e materiais',
          'Consistência de mensagem em todos os touchpoints',
          'Documentação completa para manutenção futura'
        ]
      }
    ],
    forWhom: 'Empresas iniciando presença digital do zero, Marcas com identidade confusa ou desalinhada, Negócios prontos para elevar posicionamento',
    duration: '4-8 semanas',
    deliverables: [
      'Guia de Identidade Digital (Brand Book)',
      'Sistema visual completo',
      'Mensagens-chave documentadas',
      'Templates e assets'
    ]
  },
  {
    id: 'web-experience',
    title: 'Web Experience',
    description: 'Sites personalizados com tecnologias usadas por Google, Visa e Microsoft. Entregamos velocidade, design contemporâneo e arquitetura preparada para crescer junto com seu negócio. Nota 100 no PageSpeed não é meta, é padrão.',
    included: [
      {
        title: 'Arquitetura e Planejamento',
        items: [
          'Estrutura de informação otimizada',
          'User flows e jornadas mapeadas',
          'Wireframes e prototipação',
          'Estratégia de conteúdo e SEO on-page'
        ]
      },
      {
        title: 'Design e Interface',
        items: [
          'Design system personalizado',
          'UI contemporânea e funcional',
          'Responsividade nativa (mobile-first)',
          'Micro-interações e animações estratégicas'
        ]
      },
      {
        title: 'Desenvolvimento Técnico',
        items: [
          'Stack moderno e performático (React, Next.js, ou similar)',
          'Arquitetura escalável e manutenível',
          'Core Web Vitals otimizados (100/100 PageSpeed)',
          'Integração com ferramentas e APIs necessárias'
        ]
      },
      {
        title: 'Performance e Segurança',
        items: [
          'Otimização de assets e carregamento',
          'CDN e caching estratégico',
          'SSL e proteção contra ameaças',
          'Monitoramento de uptime'
        ]
      },
      {
        title: 'Conteúdo e Lançamento',
        items: [
          'Migração de conteúdo (se aplicável)',
          'Treinamento para gestão do site',
          'Testes em múltiplos dispositivos e navegadores',
          'Deploy e acompanhamento pós-lançamento'
        ]
      }
    ],
    forWhom: 'Empresas que precisam de site do zero, Negócios com sites lentos ou desatualizados, Marcas que exigem presença digital premium',
    duration: '8-16 semanas (dependendo da complexidade)',
    deliverables: [
      'Site completo e funcional',
      'Documentação técnica',
      'Treinamento de gestão de conteúdo',
      '30 dias de suporte pós-lançamento'
    ],
    technologies: [
      'React, Next.js, Vue (frontend)',
      'Node.js, Python (backend quando necessário)',
      'Headless CMS (Contentful, Sanity, ou similar)',
      'Hospedagem em infraestrutura moderna (Vercel, AWS)'
    ]
  },
  {
    id: 'brand-led-seo',
    title: 'Brand-Led SEO',
    description: 'SEO que coloca sua marca em evidência, não apenas suas palavras-chave. Trabalhamos visibilidade orgânica sustentável alinhada com quem você realmente é — construindo autoridade que resiste a mudanças de algoritmo e tendências passageiras.',
    included: [
      {
        title: 'Análise e Estratégia',
        items: [
          'Auditoria técnica completa (SEO on-page e off-page)',
          'Análise de autoridade de domínio e backlinks',
          'Pesquisa de intenção de busca (não apenas keywords)',
          'Mapeamento de oportunidades de conteúdo',
          'Análise competitiva aprofundada'
        ]
      },
      {
        title: 'Otimização Técnica (Estrutura)',
        items: [
          'Schema markup e dados estruturados',
          'Arquitetura de informação otimizada',
          'Core Web Vitals e performance',
          'Indexação e crawlability',
          'Links internos estratégicos'
        ]
      },
      {
        title: 'Conteúdo Estratégico (Expressão)',
        items: [
          'Criação de conteúdo baseado em autoridade',
          'Otimização de conteúdo existente',
          'Pillar pages e content clusters',
          'E-E-A-T (Experience, Expertise, Authoritativeness, Trust)'
        ]
      },
      {
        title: 'Identidade de Marca (Essência)',
        items: [
          'Alinhamento de SEO com brand voice',
          'Construção de autoridade temática',
          'Presença em Knowledge Graph',
          'Brand signals e menções'
        ]
      },
      {
        title: 'Monitoramento e Evolução',
        items: [
          'Acompanhamento de rankings e tráfego qualificado',
          'Análise de comportamento do usuário',
          'Ajustes contínuos baseados em dados',
          'Relatórios mensais com insights acionáveis'
        ]
      }
    ],
    forWhom: 'Empresas que querem visibilidade sustentável, Marcas cansadas de táticas que param de funcionar, Negócios prontos para investimento de médio/longo prazo',
    duration: 'Trabalho contínuo (contratos mínimos de 6 meses)',
    expectedResults: [
      'Aumento de tráfego qualificado (não apenas volume)',
      'Melhora em rankings para termos estratégicos',
      'Autoridade de marca reconhecida pelo Google',
      'Resiliência a updates de algoritmo'
    ],
    differentials: [
      'Não focamos apenas em keywords genéricas',
      'Construímos autoridade real, não manipulação',
      'Estratégia alinhada com identidade da marca',
      'Resultados sustentáveis em longo prazo'
    ]
  },
  {
    id: 'growth-strategy',
    title: 'Growth Strategy',
    description: 'Análise profunda do seu negócio, concorrentes e audiência para traçar um roadmap de crescimento em longo prazo. Ações baseadas em dados e metodologias científicas, com resultados que você consegue medir e sua equipe, executar.',
    included: [
      {
        title: 'Diagnóstico Completo',
        items: [
          'Auditoria de presença digital atual',
          'Análise SWOT específica para digital',
          'Mapeamento de processos e gargalos',
          'Benchmark competitivo detalhado',
          'Análise de audiência e comportamento'
        ]
      },
      {
        title: 'Análise de Mercado',
        items: [
          'Identificação de oportunidades inexploradas',
          'Análise de concorrentes diretos e indiretos',
          'Tendências de mercado e previsões',
          'Gaps e oceanos azuis no seu segmento'
        ]
      },
      {
        title: 'Roadmap Estratégico',
        items: [
          'Objetivos de curto, médio e longo prazo (OKRs)',
          'Priorização de ações (framework ICE ou similar)',
          'Timeline realista de implementação',
          'Alocação de recursos e budget',
          'Definição de KPIs e métricas de sucesso'
        ]
      },
      {
        title: 'Plano de Execução',
        items: [
          'Ações específicas para cada fase',
          'Responsáveis e dependências',
          'Quick wins + projetos estruturantes',
          'Playbooks e processos documentados'
        ]
      },
      {
        title: 'Frameworks e Ferramentas',
        items: [
          'Metodologias aplicadas (Growth Loops, Pirate Metrics, etc.)',
          'Dashboards e ferramentas de acompanhamento',
          'Templates para execução da equipe',
          'Guias de implementação detalhados'
        ]
      }
    ],
    forWhom: 'Empresas estagnadas ou com crescimento lento, Negócios que querem escalar com previsibilidade, Times que precisam de direção estratégica clara',
    duration: '4-6 semanas (diagnóstico + roadmap)',
    deliverables: [
      'Documento estratégico completo (50-80 páginas)',
      'Roadmap visual e interativo',
      'Planilhas de acompanhamento',
      '6 meses de suporte para dúvidas (resposta em 24h úteis)'
    ],
    workFormat: [
      'Kickoff presencial ou remoto',
      '2-3 workshops com time interno',
      'Entrevistas com stakeholders',
      'Apresentação final com Q&A',
      'Check-ins trimestrais (opcional)'
    ]
  },
  {
    id: 'trust-advisement',
    title: 'Trust Advisement',
    description: 'Consultoria estratégica para quando você precisa de um parceiro que entende o digital de verdade. Ajudamos você a tomar decisões complexas, superar obstáculos específicos e traduzir tecnologia em oportunidades reais de negócio.',
    included: [
      {
        title: 'Consultoria Sob Demanda',
        items: [
          'Sessões de consultoria conforme necessidade',
          'Análise de situações específicas',
          'Recomendações estratégicas baseadas em experiência',
          'Second opinion em decisões importantes'
        ]
      },
      {
        title: 'Tomada de Decisão',
        items: [
          'Avaliação de fornecedores e parceiros (agências, ferramentas)',
          'Análise de propostas técnicas',
          'Due diligence em projetos digitais',
          'Escolha de tecnologias e stack'
        ]
      },
      {
        title: 'Resolução de Problemas',
        items: [
          'Diagnóstico de obstáculos específicos',
          'Soluções customizadas para desafios únicos',
          'Mediação entre áreas técnicas e negócio',
          'Tradução de jargão técnico para decisões de negócio'
        ]
      },
      {
        title: 'Oportunidades de Inovação',
        items: [
          'Identificação de possibilidades tecnológicas',
          'Exploração de novas tendências aplicáveis',
          'Validação de ideias e hipóteses',
          'Roadmap de inovação'
        ]
      },
      {
        title: 'Formatos de Suporte',
        items: [
          'Retainer mensal (horas alocadas)',
          'Sessões pontuais (1-3h por demanda)',
          'Workshops facilitados',
          'Análise de documentos e materiais'
        ]
      }
    ],
    forWhom: 'CMOs e CTOs que precisam de parceiro estratégico, Founders navegando transformação digital, Empresas em momentos de decisão crítica, Times que precisam validação externa experiente',
    duration: 'Variável (retainer mensal ou sessões pontuais)',
    investment: [
      'Retainer: horas mensais pré-contratadas',
      'Sessões pontuais: cobradas por sessão',
      'Projetos específicos: proposta customizada'
    ],
    differentials: [
      'Experiência real (não consultoria teórica)',
      'Independência (sem viés de fornecedor)',
      'Foco em negócio (não apenas tecnologia)',
      'Linguagem acessível (sem jargão desnecessário)'
    ]
  },
];
---

<div class="services-interactive-container">
  <aside class="services-nav">
    <ul class="services-nav-list">
      {services.map((service, index) => (
        <li class="services-nav-item">
          <a href={`#${service.id}`} data-target={service.id} class={index === 0 ? 'active' : ''}>
            {service.title}
          </a>
        </li>
      ))}
    </ul>
  </aside>
  <main class="services-content">
    {services.map((service, index) => (
      <article id={service.id} class={`service-article ${index !== 0 ? 'is-hidden' : ''}`}>
        <h2 class="service-title">{service.title}</h2>
        <p class="service-description">{service.description}</p>
        
        <div class="service-details-grid">
            <div class="service-detail-item">
              <h4>Para quem é</h4>
              <p>{service.forWhom}</p>
            </div>
            <div class="service-detail-item">
              <h4>Duração Típica</h4>
              <p>{service.duration}</p>
            </div>
        </div>

        <div class="service-included">
          <h3>O que está incluído</h3>
          <div class="included-grid">
            {service.included.map(section => (
              <div class="included-section">
                <h5>{section.title}</h5>
                <ul>
                  {section.items.map(item => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
        
        {service.deliverables && (
          <div class="service-deliverables">
            <h3>Entregáveis</h3>
            <ul>
              {service.deliverables.map(item => (
                <li>{item}</li>
              ))}
            </ul>
          </div>
        )}

        <div class="service-cta">
          <a href="/contato" class="btn btn-secondary">
            Discutir Projeto
            <span class="arrow">→</span>
          </a>
        </div>
      </article>
    ))}
  </main>
</div>

<script>
  import { gsap } from "gsap";

  function initInteractiveServices() {
    const navLinks = document.querySelectorAll('.services-nav-list a');
    const articles = document.querySelectorAll('.service-article');

    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        
        const targetId = link.getAttribute('data-target');
        const targetArticle = document.getElementById(targetId);

        if (!targetArticle || link.classList.contains('active')) {
          return;
        }

        // Update active link
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');

        // Find currently active article
        const currentArticle = document.querySelector('.service-article:not(.is-hidden)');

        // Animate out the current article
        if (currentArticle) {
          gsap.to(currentArticle, {
            opacity: 0,
            y: 20,
            duration: 0.3,
            ease: 'power2.in',
            onComplete: () => {
              currentArticle.classList.add('is-hidden');
              
              // Animate in the new article
              targetArticle.classList.remove('is-hidden');
              gsap.fromTo(targetArticle, 
                { opacity: 0, y: 20 },
                { 
                  opacity: 1, 
                  y: 0, 
                  duration: 0.4, 
                  ease: 'power2.out',
                  onComplete: () => {
                    // Scroll to the service content after animation completes
                    setTimeout(() => {
                      targetArticle.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                        inline: "nearest"
                      });
                    }, 50); // Small delay to ensure rendering is complete
                  }
                }
              );
            }
          });
        } else {
            // If no article is visible, just animate in the new one
            targetArticle.classList.remove('is-hidden');
            gsap.fromTo(targetArticle, 
                { opacity: 0, y: 20 },
                { 
                  opacity: 1, 
                  y: 0, 
                  duration: 0.4, 
                  ease: 'power2.out',
                  onComplete: () => {
                    // Scroll to the service content after animation completes
                    setTimeout(() => {
                      targetArticle.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                        inline: "nearest"
                      });
                    }, 50); // Small delay to ensure rendering is complete
                  }
                }
            );
        }
      });
    });
  }

  document.addEventListener('DOMContentLoaded', initInteractiveServices);
  document.addEventListener('astro:page-load', initInteractiveServices);
</script>

<style>
  .services-interactive-container {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: var(--space-4xl);
    padding: var(--space-5xl) var(--space-lg);
    max-width: 1600px;
    margin: 0 auto;
    align-items: start;
  }

  /* Left Navigation */
  .services-nav {
    position: sticky;
    top: 120px; /* Adjust based on header height */
    height: calc(100vh - 150px);
    overflow-y: auto;
    padding-right: var(--space-lg);
  }

  .services-nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .services-nav-item a {
    display: block;
    padding: var(--space-sm) var(--space-md);
    font-family: var(--font-family-heading);
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-tertiary);
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: background-color var(--transition-normal), color var(--transition-normal);
    position: relative;
  }

  .services-nav-item a::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    background-color: var(--color-accent);
    transition: height var(--transition-normal);
  }

  .services-nav-item a:hover {
    color: var(--color-text-primary);
  }

  .services-nav-item a.active {
    color: var(--color-text-primary);
    font-weight: var(--font-weight-bold);
  }

  .services-nav-item a.active::before {
    height: 80%;
  }

  /* Right Content */
  .services-content {
    min-height: 80vh;
  }

  .service-article {
    opacity: 1;
    transition: opacity 0.4s ease;
  }

  .service-article.is-hidden {
    display: none;
    opacity: 0;
    pointer-events: none;
  }

  .service-title {
    font-size: var(--font-size-5xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-lg);
  }

  .service-description {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-relaxed);
    color: var(--color-text-secondary);
    max-width: 75ch;
    margin-bottom: var(--space-2xl);
  }

  .service-details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-xl);
    margin-bottom: var(--space-3xl);
    padding-bottom: var(--space-xl);
    border-bottom: 1px solid var(--color-border);
  }

  .service-detail-item h4 {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wide);
    margin-bottom: var(--space-sm);
  }

  .service-detail-item p {
    font-size: var(--font-size-base);
    color: var(--color-text-primary);
    margin: 0;
  }

  .service-included h3,
  .service-deliverables h3 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-medium);
    margin-bottom: var(--space-xl);
    padding-bottom: var(--space-md);
    border-bottom: 1px solid var(--color-border);
  }

  .included-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-2xl);
  }

  .included-section h5 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-md);
  }

  .included-section ul,
  .service-deliverables ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .included-section li,
  .service-deliverables li {
    position: relative;
    padding-left: var(--space-lg);
    color: var(--color-text-secondary);
  }

  .included-section li::before,
  .service-deliverables li::before {
    content: '•';
    position: absolute;
    left: 0;
    color: var(--color-accent);
  }
  
  .service-deliverables {
      margin-top: var(--space-3xl);
  }

  .service-cta {
    margin-top: var(--space-3xl);
    padding-top: var(--space-2xl);
    border-top: 1px solid var(--color-border);
  }

  /* Enhanced CSS to match homepage button styling */
  .service-cta .btn-secondary {
    padding: var(--space-md) var(--space-2xl);
    font-family: var(--font-family-primary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wider);
    border-radius: 0;
    position: relative;
    overflow: hidden;
  }

  .service-cta .btn-secondary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--color-accent);
    transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: -1;
  }

  .service-cta .arrow {
    margin-left: var(--space-sm);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .service-cta .btn-secondary:hover::before {
    left: 0;
  }

  .service-cta .btn-secondary:hover {
    color: var(--color-primary) !important;
    border-color: var(--color-accent) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(192, 178, 131, 0.3) !important;
  }

  .service-cta .btn-secondary:hover .arrow {
    transform: translateX(5px);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .services-interactive-container {
      grid-template-columns: 240px 1fr;
      gap: var(--space-2xl);
    }

    .services-nav-item a {
      font-size: var(--font-size-lg);
    }
  }

  @media (max-width: 768px) {
    .services-interactive-container {
      grid-template-columns: 1fr;
      padding: var(--space-3xl) var(--space-md);
      gap: var(--space-lg);
    }

    .services-nav {
      position: relative;
      top: 0;
      height: auto;
      overflow-y: visible;
      padding-right: 0;
      margin-bottom: var(--space-xl);  /* Reduced space */
      border-bottom: 1px solid var(--color-border);
    }
    
    .services-nav-list {
        flex-direction: column;  /* Changed to column layout to show all options */
        overflow-x: visible;
        scrollbar-width: auto; /* Show scrollbar if needed */
        -ms-overflow-style: auto; /* IE and Edge */
    }

    .services-nav-list::-webkit-scrollbar {
        display: none; /* Still hide scrollbar for better UX */
    }

    .services-nav-item {
        flex-shrink: 0;
        margin-bottom: var(--space-xs);  /* Add some space between items */
    }

    .services-nav-item a {
        font-size: var(--font-size-base);
        padding: var(--space-md);
        white-space: normal;  /* Allow text wrapping */
        display: block;  /* Make each link full width */
        border-radius: var(--radius-sm);
    }

    .services-nav-item a::before {
        width: 100%;
        height: 3px;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        transform: none;
    }

    .services-nav-item a.active::before {
        height: 3px;
    }
    
    /* Adjust content area for mobile */
    .services-content {
      padding: 0;
    }
    
    .service-article {
      padding: var(--space-md);
    }

    .service-title {
        font-size: var(--font-size-4xl);
    }

    .included-grid {
        grid-template-columns: 1fr;
    }
  }

  @media (max-width: 480px) {
    .services-interactive-container {
        padding: var(--space-2xl) var(--space-sm);
    }

    .service-title {
        font-size: var(--font-size-3xl);
    }

    .service-description {
        font-size: var(--font-size-base);
    }

    .included-section h5 {
        font-size: var(--font-size-base);
    }
  }
</style>
